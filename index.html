<!DOCTYPE html>
<html lang="en">
<script>
    const sessionCookie = getCookie('userId')
    if (!sessionCookie) {
        const userId = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
        document.cookie = ('userId=' + userId + 'Expires=$');
    }

    function getCookie(name) {
        const cookies = document.cookie.split(';');
        for (const cookie of cookies) {
            const [cookieName, cookieValue] = cookie.split('=');
            if (cookieName.trim() === name) {
                return cookieValue.trim();
            }
        }
        return null;
    }
</script>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="css/HomePage.css"/>
    <link rel="icon" href="ressources/Hibiscus.png">
    <link rel="stylesheet" href="./css/Star.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@300;700&display=swap" rel="stylesheet">
    <title>Hibiscus</title>
</head>
<body>
<div>
    <div id="headerGrid">
        <div id="navGrid">
            <a class="menuButton" href="index.html">Home</a>
            <a class="menuButton" href="./html/menu.html">Menu</a>
            <a class="menuButton" href="./html/about_me.html">About</a>
            <a class="menuButton" href="./html/reservations.html">Reservations</a>
        </div>
        <div id="headWelcome">
            <img id="iconHibiscusTitle" src="https://cdn-icons-png.flaticon.com/512/616/616779.png">
            <h1 id="textWelcomeToHibiscus">Welcome to Hibiscus!</h1>
        </div>
    </div>
    <div id="containerWelcomeTitle">
        <div id="boxWelcomeTitle">
            <div id="welcomeTitleContent">
                <h2 id="welcome">Herzlich Willkommen <br>bei unserem Restaurant</h2>
            </div>
        </div>
        <div id="boxMostVisited">
            <h2>Meist besuchte Seiten</h2>
            <ol id="listOfMostVisited">
            </ol>
        </div>
    </div>
    <div id="containerWelcomeText">
        <img id="hibiscusPicWelcomeText"
             src="https://i.pinimg.com/originals/ba/66/c1/ba66c1f19a5807e29e99dd71335831fc.png">
        <div id="boxWelcomeText">
            <div id="welcomeTextContent">
                <p class="firstParagraph"><b>Dein <u> kulinarisches Abenteuer</u> wartet auf dich. <br>
                    Mitten im Herzen von Berlin, nahe des Kurfürstendamms liegt das Familiengeführte Restaurant Hibiscus</b>
                    <span>
                            <br>
                            <br>
                            Ein Restaurant zum Wohlfühlen, eine Bar zum Entspannen und immer etwas Neues, damit es nicht langweilig wird. So könnte man das Hibiscus in einem Satz beschreiben.
                        <br>
                        Bei uns erwartet Sie eine ehrliche Küche mit Pfiff. Unsere jahreszeitlich wechselnde Speisenkarte bietet Spezialitäten der klassischen Küche, beliebte Fischgerichte und frisch über dem Feuer gegrillte Steaks. <br> Und auf unserer Tageskarte präsentieren wir saisonale Spezialitäten und Angebote des Marktes.</span>
                </p>
            </div>
        </div>
    </div>
    <div id="contentOpeningHours">
        <div id="leftCirclesOpening">
            <div id="circle2Opening"></div>
            <div id="circle1Opening"></div>
        </div>
        <div id="boxOpeningHours">
            <h2 id="openingTitle">Öffnungszeiten</h2>
            <table id="tableOpening" cellspacing="10" cellpadding="10">
                <tr class="openingTableRow">
                    <th>Montag</th>
                    <td>09:30 - 22:00</td>
                </tr>
                <tr class="openingTableRow">
                    <th>Dienstag</th>
                    <td>09:30 - 22:00</td>
                </tr>
                <tr class="openingTableRow">
                    <th>Mittwoch</th>
                    <td>09:30 - 22:00</td>
                </tr>
                <tr class="openingTableRow">
                    <th>Donnerstag</th>
                    <td>09:30 - 22:00</td>
                </tr>
                <tr class="openingTableRow">
                    <th>Freitag</th>
                    <td>09:30 - 22:00</td>
                </tr>
                <tr class="openingTableRow">
                    <th>Samstag</th>
                    <td>10:00 - 20:30</td>
                </tr>
                <tr class="openingTableRow">
                    <th>Sonntag</th>
                    <td>Geschlossen</td>
                </tr>
            </table>
        </div>
        <div>
            <div id="circle3Opening"></div>
            <div id="circle4Opening"></div>
        </div>
    </div>
    <div>
        <div id="containerVeranstaltungenTitle">
            <div id="boxVeranstaltungenTitle">
                <div id="veranstaltungenTitleContent">
                    <h2 class="welcome">Nächste Veranstaltungen</h2>
                </div>
            </div>
        </div>
        <div id="containerVeranstaltungenText">
            <div id="boxVeranstaltungenText">
                <div id="veranstaltungenTextContent">
                    <p class="firstParagraph">Die nächsten <i>Veranstaltungen</i> welche für dieses Restaurant geplant
                        sind. <br>
                        Gegen das jährliche Einerlei verwöhnen wir Sie mit verschiedensten Spezialitätenabenden und
                        Wochen.<br> Bei themenbezogener Atmosphäre servieren wir Menüs, besondere Speisen und
                        Getränkespezialitäten.</p>
                </div>
            </div>
        </div>
    </div>
    <script src="JavaScript/EventBoxSlide.js"></script>
    <div id="containerContentCelebrations">
        <div id="boxContentCelebrations">
            <div class="eventSlide">
                <div class="MonthCelebration">
                    <h3>Januar</h3>
                </div>
                <div class="boxEvents">
                    <div class="eventItem" id="winterFest">
                        <h3>Winter-Feier</h3>
                        <p>10.01</p>
                        <p>ab 18</p>
                        <div class="hibiscsuPattern">
                            <button onclick="showFavourite(event)" class="faveButton"><img id="fav29" class="star"
                                                                                           data-fave="notFave"
                                                                                           height="25px" width="25px"
                                                                                           src="../ressources/notFaveStar.png"/>
                            </button>
                        </div>
                    </div>
                    <div class="eventItem" id="interJan">
                        <h3>Internationaler Tag</h3>
                        <p>10.01</p>
                        <p>ab 18</p>
                        <div class="hibiscsuPattern">
                            <button onclick="showFavourite(event)" class="faveButton"><img id="fav30" class="star"
                                                                                           data-fave="notFave"
                                                                                           height="25px" width="25px"
                                                                                           src="../ressources/notFaveStar.png"/>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="eventSlide">
                <div class="MonthCelebration">
                    <h3>Februar</h3>
                </div>
                <div class="boxEvents">
                    <div class="eventItem" id="fasching">
                        <h3>Fasching</h3>
                        <p>21.02</p>
                        <p>ab 18</p>
                        <div class="hibiscsuPattern">
                            <button onclick="showFavourite(event)" class="faveButton"><img id="fav31" class="star"
                                                                                           data-fave="notFave"
                                                                                           height="25px" width="25px"
                                                                                           src="../ressources/notFaveStar.png"/>
                            </button>
                        </div>
                    </div>
                    <div class="eventItem" id="interFeb">
                        <h3>Internationaler Tag</h3>
                        <p>10.02</p>
                        <p>ab 18</p>
                        <div class="hibiscsuPattern">
                            <button onclick="showFavourite(event)" class="faveButton"><img id="fav17" class="star"
                                                                                           data-fave="notFave"
                                                                                           height="25px" width="25px"
                                                                                           src="../ressources/notFaveStar.png"/>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="eventSlide">
                <div class="MonthCelebration">
                    <h3>März</h3>
                </div>
                <div class="boxEvents">
                    <div class="eventItem" id="hexJagd">
                        <h3>Hexen Jagd</h3>
                        <p>01.03</p>
                        <p>ab 20</p>
                        <div class="hibiscsuPattern">
                            <button onclick="showFavourite(event)" class="faveButton"><img id="fav18" class="star"
                                                                                           data-fave="notFave"
                                                                                           height="25px" width="25px"
                                                                                           src="../ressources/notFaveStar.png"/>
                            </button>
                        </div>
                    </div>
                    <div class="eventItem" id="interMär">
                        <h3>Internationaler Tag</h3>
                        <p>10.03</p>
                        <p>ab 18</p>
                        <div class="hibiscsuPattern">
                            <button onclick="showFavourite(event)" class="faveButton"><img id="fav19" class="star"
                                                                                           data-fave="notFave"
                                                                                           height="25px" width="25px"
                                                                                           src="../ressources/notFaveStar.png"/>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="eventSlide">
                <div class="MonthCelebration">
                    <h3>April</h3>
                </div>
                <div class="boxEvents">
                    <div class="eventItem" id="ostern">
                        <h3>Ostern</h3>
                        <p>Osterwochenende</p>
                        <p>Jeden Abend ab 17</p>
                        <div class="hibiscsuPattern">
                            <button onclick="showFavourite(event)" class="faveButton"><img id="fav20" class="star"
                                                                                           data-fave="notFave"
                                                                                           height="25px" width="25px"
                                                                                           src="../ressources/notFaveStar.png"/>
                            </button>
                        </div>
                    </div>
                    <div class="eventItem" id="interApr">
                        <h3>Internationaler Tag</h3>
                        <p>10.04</p>
                        <p>ab 18</p>
                        <div class="hibiscsuPattern">
                            <button onclick="showFavourite(event)" class="faveButton"><img id="fav21" class="star"
                                                                                           data-fave="notFave"
                                                                                           height="25px" width="25px"
                                                                                           src="../ressources/notFaveStar.png"/>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="eventSlide">
                <div class="MonthCelebration">
                    <h3>Mai</h3>
                </div>
                <div class="boxEvents">
                    <div class="eventItem" id="japan">
                        <h3>Japanische Woche</h3>
                        <p>07.05 - 14.05</p>
                        <p>Jeden Tag ab 18</p>
                        <div class="hibiscsuPattern">
                            <button onclick="showFavourite(event)" class="faveButton"><img id="fav22" class="star"
                                                                                           data-fave="notFave"
                                                                                           height="25px" width="25px"
                                                                                           src="../ressources/notFaveStar.png"/>
                            </button>
                        </div>
                    </div>
                    <div class="eventItem" id="interMai">
                        <h3>Internationaler Tag</h3>
                        <p>10.05</p>
                        <p>ab 18</p>
                        <div class="hibiscsuPattern">
                            <button onclick="showFavourite(event)" class="faveButton"><img id="fav23" class="star"
                                                                                           data-fave="notFave"
                                                                                           height="25px" width="25px"
                                                                                           src="../ressources/notFaveStar.png"/>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="eventSlide">
                <div class="MonthCelebration">
                    <h3>Juni</h3>
                </div>
                <div class="boxEvents">
                    <div class="eventItem" id="sommer">
                        <h3>Sommer Fest</h3>
                        <p>20.06</p>
                        <p>ab 15</p>
                        <div class="hibiscsuPattern">
                            <button onclick="showFavourite(event)" class="faveButton"><img id="fav24" class="star"
                                                                                           data-fave="notFave"
                                                                                           height="25px" width="25px"
                                                                                           src="../ressources/notFaveStar.png"/>
                            </button>
                        </div>
                    </div>
                    <div class="eventItem" id="interJun">
                        <h3>Internationaler Tag</h3>
                        <p>10.06</p>
                        <p>ab 18</p>
                        <div class="hibiscsuPattern">
                            <button onclick="showFavourite(event)" class="faveButton"><img id="fav25" class="star"
                                                                                           data-fave="notFave"
                                                                                           height="25px" width="25px"
                                                                                           src="../ressources/notFaveStar.png"/>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="eventSlide">
                <div class="MonthCelebration">
                    <h3>Juli</h3>
                </div>
                <div class="boxEvents">
                    <div class="eventItem" id="interJul">
                        <h5>Internationaler Tag</h5>
                        <p>10.07</p>
                        <p>ab 18</p>
                        <div class="hibiscsuPattern">
                            <button onclick="showFavourite(event)" class="faveButton"><img id="fav26" class="star"
                                                                                           data-fave="notFave"
                                                                                           height="25px" width="25px"
                                                                                           src="../ressources/notFaveStar.png"/>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="eventSlide">
                <div class="MonthCelebration">
                    <h3>August</h3>
                </div>
                <div class="boxEvents">
                    <div class="eventItem" id="franz">
                        <h3>Alles Französisch</h3>
                        <p>22.08</p>
                        <p>ab 21</p>
                        <div class="hibiscsuPattern">
                            <button onclick="showFavourite(event)" class="faveButton"><img id="fav27" class="star"
                                                                                           data-fave="notFave"
                                                                                           height="25px" width="25px"
                                                                                           src="../ressources/notFaveStar.png"/>
                            </button>
                        </div>
                    </div>
                    <div class="eventItem" id="interAug">
                        <h3>Internationaler Tag</h3>
                        <p>10.08</p>
                        <p>ab 18</p>
                        <div class="hibiscsuPattern">
                            <button onclick="showFavourite(event)" class="faveButton"><img id="fav28" class="star"
                                                                                           data-fave="notFave"
                                                                                           height="25px" width="25px"
                                                                                           src="../ressources/notFaveStar.png"/>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <button id="boxHandleSwipeRight" onclick="plusDivs(1)">

        </button>
    </div>
    <div class="boxComment">
        <textarea type="text" id="homePageComment" class="CommentBox"
                  placeholder="Meinungen für eine Veranstaltung"></textarea>
        <button id="PostMeinung">Post</button>
    </div>
    <div id="homeCOmmentsShow">
        <ul id="commentsFromEvents">

        </ul>
    </div>
    <script>
        fetch('http://localhost:8000/getCommentsMain', {
            method: 'GET',
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok')
                }
                return response.json()
            })
            .then(data => {
                    data.forEach(comment => {
                        var li = document.createElement("li");
                        var text = document.createTextNode(comment.comment);
                        li.appendChild(text);
                        if(comment.userID === getCookie("userId")) {
                            var myComment = document.createTextNode("- mein Kommentar")
                            li.appendChild(myComment)
                        }
                        document.getElementById("commentsFromEvents").appendChild(li);
                    })
                }
            )

    </script>
    <script>
        function getCookie(cookieName) {
            let cookie = {};
            document.cookie.split(';').forEach(function (el) {
                let [key, value] = el.split('=');
                cookie[key.trim()] = value;
            })
            return cookie[cookieName];
        }

        let tmp = getCookie("userId");
        var post = document.getElementById("PostMeinung");
        post.addEventListener("click", function () {
            var commentBoxValue = document.getElementById("homePageComment").value;
            var root = document.getElementById("commentsFromEvents");
            var alreadyThereLi = root.getElementsByTagName("li")
            if (alreadyThereLi.length > 0) {
                for (let i = alreadyThereLi.length - 1; i >= 0; i--) {
                    root.removeChild(alreadyThereLi[i])
                }
            }
            fetch('http://localhost:8000/postCommentsMain', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({userID: tmp, comment: commentBoxValue})
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok')
                    }
                    console.log(response)
                    return response.json();
                })
                .catch(error => console.error(error))
                .then(data => {
                    console.log(data);
                    fetch('http://localhost:8000/getCommentsMain', {
                        method: 'GET',
                    })
                        .then(response => {
                            if (!response.ok) {
                                throw new Error('Network response was not ok')
                            }
                            return response.json()
                        })
                        .then(data => {
                            data.forEach(comment => {
                                var li = document.createElement("li");
                                var text = document.createTextNode(comment.comment);
                                li.appendChild(text);
                                if(comment.userID === getCookie("userId")) {
                                    var myComment = document.createTextNode("- mein Kommentar")
                                    li.appendChild(myComment)
                                }
                                document.getElementById("commentsFromEvents").appendChild(li);
                            })
                        })
                        .catch(error => console.error(error));
                })
                .catch(error => console.error(error));
        });
        let pageVisits = {0: 0, 1: 0, 2: 0};
        if ((getCookie("menu"))) {
            pageVisits[0] = Number(getCookie("menu"));
        }
        if ((getCookie("about"))) {
            pageVisits[1] = Number(getCookie("about"));
        }
        if ((getCookie("reservations"))) {
            pageVisits[2] = Number(getCookie("reservations"));
        }
        let sortedPages = Object.keys(pageVisits).sort((a, b) => pageVisits[b] - pageVisits[a]);

        let myList = document.getElementById("listOfMostVisited");
        for (let obj of sortedPages) {
            let li = document.createElement("li");
            let a = document.createElement("a");
            switch (Number(obj)) {
                case 0:
                    a.href = "./html/menu.html";
                    a.textContent = "Menü";
                    break;
                case 1:
                    a.href = "./html/about_me.html";

                    a.textContent = "About Me";
                    break;
                case 2:
                    a.href = "./html/reservations.html";
                    a.textContent = "Reservationen";
                    break;
                default:
                    a.textContent = "Fehlerrr"
            }
            li.appendChild(a);
            myList.appendChild(li);
        }
    </script>
    <div id="footer">
        <div>
            <h2>Adresse</h2>
            <p><b>Name:</b> Hibiscus <br>
                <b>Straße:</b> Eisenzahnstraße 90 <br>
                <b>Postleitzahl:</b> 12589, Berlin <br>
                <b>E-Mail:</b> info@restaurant-hibiscus.de <br>
                <b>Tel.:</b> (+49) 163 5556416
            </p>
        </div>
        <div>
            <h2>Folge Uns</h2>
            <p>Wir sind zu finden auf Facebook und Instagram</p>
        </div>
    </div>
</div>
<script>

    function showFavourite(event) {
        const button = event.target;

        if (button.dataset.fave === "notFave") {
            button.dataset.fave = "isFave"
            button.src = "../ressources/faveStar.png"
        } else {
            button.src = "../ressources/notFaveStar.png"
            button.dataset.fave = "notFave"
        }
        fetch('http://localhost:8000/fav', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({userID: tmp, buttonID: button.id, isFavNow: !(button.dataset.fave === "notFave")})
        })
            .then(response => response.json())
            .then(data => console.log(data))
            .catch(error => console.error(error));

    }
    fetch('http://localhost:8000/getFav', {
        method: 'GET',
    })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok')
            }
            return response.json()
        })
        .then(data => {
                data.forEach(object => {
                    const button = document.getElementById(object.buttonID);
                    if (tmp === object.userID && button) {
                        if (object.isFavNow) {
                            button.dataset.fave = "isFave"
                            button.src = "../ressources/faveStar.png"
                        } else {
                            button.src = "../ressources/notFaveStar.png"
                            button.dataset.fave = "notFave"
                        }
                    }
                })
            }
        )
</script>
</body>
</html>